const hamburger=document.getElementById("hamburger"),sideMenu=document.getElementById("sideMenu"),overlay=document.getElementById("overlay"),menuBtns=document.querySelectorAll(".menu-btn"),panels=document.querySelectorAll(".panel"),fadeEls=document.querySelectorAll(".fade-in"),headings=document.querySelectorAll(".section-heading");function reveal(){let e=.85*window.innerHeight;fadeEls.forEach(t=>{let l=t.getBoundingClientRect();l.top<e&&t.classList.add("visible")}),headings.forEach(e=>{let t=e.getBoundingClientRect();t.top<.9*window.innerHeight&&e.classList.add("visible")})}window.addEventListener("DOMContentLoaded",()=>{panels.forEach(e=>e.classList.remove("active-panel"));let e=document.getElementById("about");e&&e.classList.add("active-panel"),reveal()}),hamburger.addEventListener("click",()=>{let e=hamburger.classList.toggle("active");sideMenu.classList.toggle("active",e),overlay.classList.toggle("active",e),hamburger.setAttribute("aria-expanded",String(e)),sideMenu.setAttribute("aria-hidden",String(!e)),overlay.setAttribute("aria-hidden",String(!e))}),overlay.addEventListener("click",()=>{hamburger.classList.remove("active"),sideMenu.classList.remove("active"),overlay.classList.remove("active"),hamburger.setAttribute("aria-expanded","false"),sideMenu.setAttribute("aria-hidden","true"),overlay.setAttribute("aria-hidden","true")}),menuBtns.forEach(e=>{e.addEventListener("click",t=>{let l=e.dataset.section;menuBtns.forEach(e=>e.classList.remove("active")),e.classList.add("active"),panels.forEach(e=>e.classList.remove("active-panel"));let a=document.getElementById(l);a&&(a.classList.add("active-panel"),setTimeout(()=>reveal(),100)),hamburger.classList.remove("active"),sideMenu.classList.remove("active"),overlay.classList.remove("active"),hamburger.setAttribute("aria-expanded","false"),sideMenu.setAttribute("aria-hidden","true"),overlay.setAttribute("aria-hidden","true"),window.scrollTo({top:0,behavior:"smooth"})})}),window.addEventListener("scroll",reveal),window.addEventListener("resize",reveal);const galleryImgs=document.querySelectorAll(".gallery img"),overlayDiv=document.getElementById("imageOverlay"),overlayImg=document.getElementById("overlayImage"),closeBtn=document.getElementById("closeOverlay"),nextBtn=document.getElementById("nextImage"),prevBtn=document.getElementById("prevImage");let currentIndex=0,zoomLevel=1;if(galleryImgs&&overlayDiv&&overlayImg){function e(e){overlayImg.src=e,overlayDiv.classList.add("show"),document.body.style.overflow="hidden",zoomLevel=1,overlayImg.style.transform="scale(1)"}function t(){overlayDiv.classList.remove("show"),document.body.style.overflow="auto"}function l(e){currentIndex=(currentIndex+e+galleryImgs.length)%galleryImgs.length,overlayImg.src=galleryImgs[currentIndex].src,zoomLevel=1,overlayImg.style.transform="scale(1)"}galleryImgs.forEach((t,l)=>{t.addEventListener("click",()=>{currentIndex=l,e(t.src)})}),closeBtn.addEventListener("click",t),overlayDiv.addEventListener("click",e=>{e.target===overlayDiv&&t()}),nextBtn.addEventListener("click",()=>l(1)),prevBtn.addEventListener("click",()=>l(-1)),document.addEventListener("keydown",e=>{"Escape"===e.key&&t(),"ArrowRight"===e.key&&l(1),"ArrowLeft"===e.key&&l(-1)}),overlayImg.addEventListener("wheel",e=>{e.preventDefault(),zoomLevel+=-.001*e.deltaY,zoomLevel=Math.min(Math.max(zoomLevel,1),3),overlayImg.style.transform=`scale(${zoomLevel})`}),overlayImg.addEventListener("dblclick",()=>{zoomLevel=1,overlayImg.style.transform="scale(1)"})}const viewer=document.getElementById("imageViewer"),viewerImg=document.getElementById("viewerImg"),closeViewer=viewer.querySelector(".close-viewer");function closeImageViewer(){viewer.classList.remove("active"),document.body.style.overflow="auto"}document.querySelectorAll(".gallery img").forEach(e=>{e.addEventListener("click",()=>{viewerImg.src=e.src,viewer.classList.add("active"),document.body.style.overflow="hidden"})}),viewer.addEventListener("dblclick",closeImageViewer),closeViewer.addEventListener("click",closeImageViewer),window.addEventListener("keydown",e=>{"Escape"===e.key&&closeImageViewer()}),window.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("welcomeModal"),t=document.getElementById("okWelcome"),l=document.getElementById("closeWelcome");function a(){e.classList.remove("show"),document.body.style.overflow="auto",localStorage.setItem("welcomeDismissed","true")}localStorage.getItem("welcomeDismissed")||setTimeout(()=>{e.classList.add("show"),document.body.style.overflow="hidden"},700),t.addEventListener("click",a),l.addEventListener("click",a),e.addEventListener("click",t=>{t.target===e&&a()}),window.addEventListener("keydown",e=>{"Escape"===e.key&&a()})});


const welcomeModalClose = document.getElementById("okWelcome");
if (welcomeModalClose) {
  welcomeModalClose.addEventListener("click", () => {
    gtag('event', 'welcome_modal_closed', {
      'event_category': 'engagement',
      'event_label': 'Welcome Modal'
    });
  });
}
